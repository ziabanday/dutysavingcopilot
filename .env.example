# ========= HTS Duty-Saving Copilot — .env.example (SAFE TEMPLATE) =========
# DO NOT put real secrets in this file. Commit this to the repo.
# To run locally:
#   1) Copy to `.env` (gitignored).
#   2) Replace placeholders in `.env` with real values.

# ---- Required (LLM access) ----
OPENAI_API_KEY=YOUR_OPENAI_KEY_HERE
# Optional if your key is a project key:
# OPENAI_ORG_ID=org_xxxxx
# OPENAI_PROJECT=proj_xxxxx

# ---- Runtime / Server ----
LOG_LEVEL=INFO
MAX_MONTHLY_TOKENS=1000000
CORS_ORIGINS=http://127.0.0.1:8000,http://localhost:3000

# ---- Retrieval & Guardrails (Week-4 freeze) ----
FUSION_ALPHA=0.75
BM25_K1=1.4
BM25_B=0.8
TOP_K=6
STRICT_JSON=1
ABSTAIN_ON_NO_EVIDENCE=1
MAX_TOKENS=260
TIMEOUT_S=15
WARMUP=1
MIN_SCORE=0.40

# ---- (Legacy Dev) SQLite ----
# To run with SQLite (dev only), uncomment and comment out DATABASE_URL below:
# DATABASE_URL=sqlite:///local.db

# ---- Supabase Postgres (Week-5a) — Session Pooler (IPv4-friendly, works on Free) ----
# Replace YOUR_PROJECT_REF with your Supabase project ref (e.g., abcdefghijklmnop)
POSTGRES_HOST=db.YOUR_PROJECT_REF.supabase.co
POSTGRES_PORT=6543
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_WITH_YOUR_SUPABASE_DB_PASSWORD

# Psycopg3 driver + SSL required
POSTGRES_URL=postgresql+psycopg://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=require

# Primary DB URL used by SQLAlchemy
DATABASE_URL=${POSTGRES_URL}

# ---- Alternative (commented): Direct endpoint (IPv6 or paid IPv4) ----
# If your machine supports IPv6 to Supabase, or you enabled the IPv4 add-on,
# you can switch to the direct port 5432 by uncommenting and adjusting:
# POSTGRES_PORT=5432
# POSTGRES_URL=postgresql+psycopg://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=require
# DATABASE_URL=${POSTGRES_URL}

# ---- Supabase HTTP keys (for Week-5c; placeholders only) ----
SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
SUPABASE_ANON_KEY=REPLACE_WITH_YOUR_SUPABASE_ANON_KEY
# Server-only; NEVER expose to clients/browsers
SUPABASE_SERVICE_ROLE_KEY=REPLACE_WITH_YOUR_SUPABASE_SERVICE_ROLE_KEY

# ========= End of file =========
